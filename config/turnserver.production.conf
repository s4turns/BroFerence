# Coturn TURN Server - Production Configuration for ts.interdo.me
# This configuration is optimized for internet-facing WebRTC deployments

# Listening port for TURN server
listening-port=3479

# TLS listening port (optional, for secure connections)
# Uncomment if you have SSL certificates for TURN
# tls-listening-port=5349
# cert=/path/to/cert.pem
# pkey=/path/to/key.pem

# Relay IP - Don't set this for Docker, let it auto-detect
# Or use 0.0.0.0 to listen on all interfaces
listening-ip=0.0.0.0

# External IP - CRITICAL FOR INTERNET CONNECTIONS
# Option 1: Set your public IP manually
# external-ip=YOUR.PUBLIC.IP.HERE
#
# Option 2: Auto-detect (recommended for single-IP servers)
# Note: For Docker, you may need to set this manually
# Get your IP with: curl -4 ifconfig.me
# external-ip=<your-public-ip>

# Relay ports range - These ports must be open in your firewall
min-port=49152
max-port=49200

# Verbose logging (disable in production if too much)
verbose

# Use fingerprints in TURN messages
fingerprint

# Long-term credential mechanism
lt-cred-mech

# User accounts for TURN authentication
# Format: username:password
# IMPORTANT: Change these credentials in production!
user=webrtc:webrtc123

# Realm for TURN authentication - should match your domain
realm=ts.interdo.me

# Log file (commented out to use stdout for Docker logs)
# log-file=/var/log/turnserver.log

# Performance tuning
# max-bps=0  # No bandwidth limit
# bps-capacity=0  # No bandwidth limit

# Security settings
no-multicast-peers
no-cli
no-tlsv1
no-tlsv1_1

# Disable loopback peers (prevent localhost connections in production)
# Uncomment for production security
# no-loopback-peers

# Rate limiting (uncomment for production)
# user-quota=0  # Unlimited sessions per user
# total-quota=100  # Max 100 concurrent sessions
